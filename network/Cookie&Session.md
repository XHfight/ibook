# Cookie与Session详解  
&emsp;&emsp;会话（Session）跟踪是Web程序中常用的技术，用来跟踪用户的整个会话。常用的会话跟踪技术是Cookie与Session。<font color=Orchid >Cookie通过在客户端记录信息确定用户身份，Session通过在服务器端记录信息确定用户身份。</font>  
* [会话](#1)
* [Cookie](#2)
* [Session](#3)
* [cookie与session区别与联系](#4)  
http://www.mamicode.com/info-detail-608168.html
<h2 id="1">会话</h2>
- 理解会话:  
一个客户端与服务器之间的通信过程.  
通俗来说:A给B打电话,B接通电话,然后两个人布拉布拉说了一大堆之后挂断了电话,这就是依次会话.如果B没有接通电话,这就不是一次会话.如果A和C通话,这就是另一个会话了.
- 会话的建立与关闭:  
TCP的三次握手就是建立了一次会话,TCP关闭连接就是关闭会话(当会话中的客户端发现自己没有要发送的数据了,就会在数据包头中设置FIN标志,服务端收到后发送包含ACK的确认报文,客户端收到确认报文,通过确认号检查是否已经收到所有数据,当所有数据确认后,客户端关闭和服务端的会话.同理,服务端也是这样关闭和客户端的会话的).    
- HTTP会话  
HTTP协议是一个无状态的协议.  
无状态表现在没有记忆功能,断开了TCP连接，下一次连接与上一次无关.例如:客户端A与服务器进行了一次HTTP通信,过一会,客户端A又给服务器发送请求,这时服务器就不认识它了.
举一个网上购物的例子:A提交了一个HTTP请求,将一个商品加入了购物车,他现在想向购物车中加入第二个商品,发送了HTTP请求后,服务器这时已经不认识他了,不知道要把这个物品加在谁的购物车里面.这时候就会引起混乱.所以我们需要让服务器认识每一个提交属于哪一个用户.  
我们想让服务器能够识别不同的请求是不是来自同一个用户,就要引入HTTP会话机制,直到目前，session已成功HTTP会话的主流，应该说是绝对控制的地位。 

- <font color = SpringGreen >Session是怎样做到会话身份识别的呢？</font>   
浏览器第一次访问服务器，服务端接收到请求（这里忽略无须会话控制的情况）后,初始化会话，生成相应的会话信息，核心是会话ID(session id)，把会话ID发送给客户端，客户端接收到这个会话ID，把它存储起来，下一次发送请求的时候，附带着这个会话ID一起发送给服务端，服务端只要根据这个会话ID，就知道是谁了。这个会话ID，就像我们的身份证号码，一直伴随终生。核心：服务端如何生成这个会话ID，客户端怎样存储这个会话ID?
- 如何存储和传送会话ID(session id)?  
服务端存储:有多种方式,例如:普通文本存储.文件名就是session id.还可以用memorycache,redies,或者mysql之类的数据库存储,存储的原则是:所有的会话id都是唯一的.  
客户端存储:客户端不能像服务器端那样,直接用session id作为文件名,因为一个客户端需要访问多个服务器,多个服务器都会为这个客户端产生一个session id,如果多个服务端采用相同的会话生成算法.则很有可能出现一个客户端收到了来自多个服务端的相同的session id,这个时候,客户端就不认识这是哪个服务端的session id了,所以<font color=VioletRed>本地存储的时候以"域信息"作为文件名(一个域对应一个服务端)</font>

<h2 id="2">Cookie</h2>  




